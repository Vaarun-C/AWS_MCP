# mcp_server/models/ec2/ebs_models.py

from pydantic import BaseModel, Field
from typing import Optional, List, Dict, Any


class RegionOnlyParams(BaseModel):
    region: str = Field(default="ap-south-1")


class CreateVolumeParams(BaseModel):
    region: str = Field(default="ap-south-1")
    AvailabilityZone: str = Field(..., description="AZ where volume will be created")
    Size: Optional[int] = Field(default=None, description="Size in GiB")
    SnapshotId: Optional[str] = None
    VolumeType: Optional[str] = "gp3"
    Iops: Optional[int] = None
    Throughput: Optional[int] = None
    Encrypted: Optional[bool] = None
    KmsKeyId: Optional[str] = None
    Tags: Optional[Dict[str, str]] = None
    ExtraParams: Optional[Dict[str, Any]] = None


class ModifyVolumeParams(BaseModel):
    region: str = Field(default="ap-south-1")
    VolumeId: str
    Size: Optional[int] = None
    VolumeType: Optional[str] = None
    Iops: Optional[int] = None
    Throughput: Optional[int] = None


class AttachVolumeParams(BaseModel):
    region: str = Field(default="ap-south-1")
    VolumeId: str
    InstanceId: str
    Device: str  # e.g., "/dev/sdf"


class DetachVolumeParams(BaseModel):
    region: str = Field(default="ap-south-1")
    VolumeId: str
    InstanceId: Optional[str] = None
    Force: Optional[bool] = False


class DeleteVolumeParams(BaseModel):
    region: str = Field(default="ap-south-1")
    VolumeId: str


class DescribeVolumeParams(BaseModel):
    region: str = Field(default="ap-south-1")
    VolumeId: Optional[str] = None
    Filters: Optional[List[Dict[str, Any]]] = None